<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:NutritionApp.ViewModels"
             x:DataType="viewModels:MainPageViewModel"
             x:Class="NutritionApp.Views.MainPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource PageBackground}">

    <Grid RowDefinitions="200,*" Padding="0">

        <!-- Ð’ÐµÑ€Ñ…Ð½Ñ–Ð¹ Ð±Ð»Ð¾Ðº Ð· Ð³Ñ€Ð°Ð´Ñ–Ñ”Ð½Ñ‚Ð¾Ð¼ -->
        <Grid Row="0" Padding="0,16,0,16">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#4F7DFF" Offset="0.0" />
                    <GradientStop Color="#E27D5F" Offset="1.0" />
                </LinearGradientBrush>
            </Grid.Background>

            <VerticalStackLayout Spacing="10"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center">
                <Image Source="logo.png"
                       HeightRequest="70"
                       WidthRequest="70"
                       Aspect="AspectFit"
                       HorizontalOptions="Center"/>
                <Label Text="{Binding UserProfile.Username, StringFormat='Ð’Ñ–Ñ‚Ð°Ñ”Ð¼Ð¾, {0}!'}"
                       FontAttributes="Bold"
                       FontSize="24"
                       TextColor="White"
                       HorizontalOptions="Center"/>
                <Label Text="Ð¢Ð²Ð¾Ñ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ð° Ð½Ð¾Ñ€Ð¼Ð° Ñ…Ð°Ñ€Ñ‡ÑƒÐ²Ð°Ð½Ð½Ñ"
                       FontSize="14"
                       TextColor="#FFEFF2"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Ð†Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ -->
            <ActivityIndicator IsVisible="{Binding IsLoading}" 
                               IsRunning="{Binding IsLoading}" 
                               Color="White"
                               VerticalOptions="End"
                               HorizontalOptions="Center"
                               Margin="0,0,0,10"/>
        </Grid>

        <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
        <Border Grid.Row="1"
                BackgroundColor="{StaticResource CardBackground}"
                Stroke="{StaticResource BorderColor}"
                StrokeThickness="1"
                Padding="20"
                Margin="16,-32,16,16"
                StrokeShape="RoundRectangle 24">

            <ScrollView>
                <VerticalStackLayout Spacing="20">

                    <!-- Ð”Ð¾Ð±Ð¾Ð²Ð° Ð½Ð¾Ñ€Ð¼Ð° Ð‘Ð–Ð£ -->
                    <VerticalStackLayout Spacing="12">
                        <Label Text="ðŸ”¥ Ð¢Ð²Ð¾Ñ Ð´Ð¾Ð±Ð¾Ð²Ð° Ð½Ð¾Ñ€Ð¼Ð°"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource TextPrimary}"/>

                        <!-- ÐšÐ°Ð»Ð¾Ñ€Ñ–Ñ— - Ð²ÐµÐ»Ð¸ÐºÐ¸Ð¹ Ð±Ð»Ð¾Ðº -->
                        <Border Stroke="{StaticResource BorderColor}"
                                BackgroundColor="#FFF7ED"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 16"
                                Padding="16">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Border WidthRequest="44" HeightRequest="44"
                                        StrokeShape="RoundRectangle 22"
                                        BackgroundColor="#FFEDD5"
                                        Stroke="Transparent">
                                    <Label Text="ðŸ”¥" FontSize="20" 
                                           VerticalOptions="Center" 
                                           HorizontalOptions="Center"/>
                                </Border>
                                <VerticalStackLayout Grid.Column="1" Margin="12,0,0,0" VerticalOptions="Center">
                                    <Label Text="ÐšÐ°Ð»Ð¾Ñ€Ñ–Ñ—"
                                           FontSize="14"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label Text="{Binding UserProfile.Bju.Calories, StringFormat='{0} ÐºÐºÐ°Ð»'}"
                                           FontSize="22"
                                           FontAttributes="Bold"
                                           TextColor="#EA580C"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <!-- Ð‘Ð–Ð£ Ð² ÑÑ–Ñ‚Ñ†Ñ– -->
                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                            <!-- Ð‘Ñ–Ð»ÐºÐ¸ -->
                            <Border Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#F0FDF4"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="ðŸ¥©" FontSize="20" HorizontalOptions="Center"/>
                                    <Label Text="Ð‘Ñ–Ð»ÐºÐ¸"
                                           FontSize="12"
                                           TextColor="{StaticResource TextSecondary}"
                                           HorizontalOptions="Center"/>
                                    <Label Text="{Binding UserProfile.Bju.Proteins, StringFormat='{0} Ð³'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#16A34A"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Ð–Ð¸Ñ€Ð¸ -->
                            <Border Grid.Column="1"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#FFFBEB"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="ðŸ§ˆ" FontSize="20" HorizontalOptions="Center"/>
                                    <Label Text="Ð–Ð¸Ñ€Ð¸"
                                           FontSize="12"
                                           TextColor="{StaticResource TextSecondary}"
                                           HorizontalOptions="Center"/>
                                    <Label Text="{Binding UserProfile.Bju.Fats, StringFormat='{0} Ð³'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#CA8A04"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Ð’ÑƒÐ³Ð»ÐµÐ²Ð¾Ð´Ð¸ -->
                            <Border Grid.Column="2"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#EFF6FF"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="ðŸž" FontSize="20" HorizontalOptions="Center"/>
                                    <Label Text="Ð’ÑƒÐ³Ð»ÐµÐ²Ð¾Ð´Ð¸"
                                           FontSize="11"
                                           TextColor="{StaticResource TextSecondary}"
                                           HorizontalOptions="Center"/>
                                    <Label Text="{Binding UserProfile.Bju.Carbs, StringFormat='{0} Ð³'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#2563EB"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>

                    <!-- ÐŸÐ¾ÐºÐ°Ð·Ð½Ð¸ÐºÐ¸ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð° -->
                    <VerticalStackLayout Spacing="12">
                        <Label Text="ðŸ“Š Ð¢Ð²Ð¾Ñ— Ð¿Ð¾ÐºÐ°Ð·Ð½Ð¸ÐºÐ¸"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource TextPrimary}"/>

                        <Grid ColumnDefinitions="*,*" RowSpacing="10" ColumnSpacing="10">
                            <!-- Ð’Ð°Ð³Ð° -->
                            <Border Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="{StaticResource CardBackground}"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4">
                                    <Label Text="âš–ï¸ Ð’Ð°Ð³Ð°"
                                           FontSize="13"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label Text="{Binding UserProfile.Weight, StringFormat='{0} ÐºÐ³'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Ð—Ñ€Ñ–ÑÑ‚ -->
                            <Border Grid.Column="1"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="{StaticResource CardBackground}"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4">
                                    <Label Text="ðŸ“ Ð—Ñ€Ñ–ÑÑ‚"
                                           FontSize="13"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label Text="{Binding UserProfile.Height, StringFormat='{0} ÑÐ¼'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Ð’Ñ–Ðº -->
                            <Border Grid.Row="1"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="{StaticResource CardBackground}"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4">
                                    <Label Text="ðŸŽ‚ Ð’Ñ–Ðº"
                                           FontSize="13"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label Text="{Binding UserProfile.Age, StringFormat='{0} Ñ€Ð¾ÐºÑ–Ð²'}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"/>
                                </VerticalStackLayout>
                            </Border>

                            <!-- ÐœÐµÑ‚Ð° -->
                            <Border Grid.Row="1" Grid.Column="1"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="{StaticResource CardBackground}"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 14"
                                    Padding="12">
                                <VerticalStackLayout Spacing="4">
                                    <Label Text="ðŸŽ¯ ÐœÐµÑ‚Ð°"
                                           FontSize="13"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label Text="{Binding UserProfile.Goal}"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"
                                           LineBreakMode="TailTruncation"/>
                                </VerticalStackLayout>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´Ñ–Ð¹ -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Text="âœï¸ Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ñ‚Ð¸"
                                Command="{Binding GoToEditProfileCommand}"
                                HeightRequest="50"
                                CornerRadius="14"
                                BackgroundColor="{StaticResource Primary}"
                                TextColor="White"
                                FontAttributes="Bold"
                                FontSize="15"/>

                        <Button Grid.Column="1"
                                Text="ðŸ½ï¸ ÐŸÐ»Ð°Ð½ Ñ…Ð°Ñ€Ñ‡ÑƒÐ²Ð°Ð½Ð½Ñ"
                                Command="{Binding GoToMealPlanCommand}"
                                HeightRequest="50"
                                CornerRadius="14"
                                BackgroundColor="{StaticResource Accent}"
                                TextColor="White"
                                FontAttributes="Bold"
                                FontSize="15"/>
                    </Grid>

                </VerticalStackLayout>
            </ScrollView>
        </Border>

    </Grid>
</ContentPage>