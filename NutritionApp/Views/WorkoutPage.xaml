<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NutritionApp.Views.WorkoutPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource PageBackground}">

    <Grid RowDefinitions="180,*" Padding="0">

        <!-- Ð’ÐµÑ€Ñ…Ð½Ñ–Ð¹ Ð±Ð»Ð¾Ðº Ð· Ð³Ñ€Ð°Ð´Ñ–Ñ”Ð½Ñ‚Ð¾Ð¼ -->
        <Grid Row="0" Padding="0,16,0,16">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#4F7DFF" Offset="0.0" />
                    <GradientStop Color="#E27D5F" Offset="1.0" />
                </LinearGradientBrush>
            </Grid.Background>

            <VerticalStackLayout Spacing="10"
                                 VerticalOptions="Center"
                                 HorizontalOptions="Center">
                <Label Text="ÐŸÐ»Ð°Ð½ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ" 
                       FontSize="40" 
                       HorizontalOptions="Center"/>
                <Label Text="Ð¢Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ"
                       FontAttributes="Bold"
                       FontSize="24"
                       TextColor="White"
                       HorizontalOptions="Center"/>
                <Label Text="ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»Ñ–Ð·Ð¾Ð²Ð°Ð½Ðµ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ Ð½Ð° ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–"
                       FontSize="14"
                       TextColor="#FFEFF2"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>
        </Grid>

        <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
        <Border Grid.Row="1"
                BackgroundColor="{StaticResource CardBackground}"
                Stroke="{StaticResource BorderColor}"
                StrokeThickness="1"
                Padding="16"
                Margin="16,-32,16,16"
                StrokeShape="RoundRectangle 24">

            <ScrollView>
                <VerticalStackLayout Spacing="16">

                    <!-- Ð’Ð¸Ð±Ñ–Ñ€ Ñ‚Ð¸Ð¿Ñƒ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ -->
                    <Label Text="ÐžÐ±ÐµÑ€Ð¸ Ñ‚Ð¸Ð¿ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{StaticResource TextPrimary}"/>

                    <!-- 3 ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð²Ð¸Ð±Ð¾Ñ€Ñƒ Ñ‚Ð¸Ð¿Ñƒ -->
                    <Grid RowDefinitions="Auto,Auto" 
                          ColumnDefinitions="*,*" 
                          RowSpacing="12" 
                          ColumnSpacing="12">

                        <!-- ÐšÐ°Ñ€Ð´Ñ–Ð¾ -->
                        <Border x:Name="CardioCard"
                                Stroke="{StaticResource BorderColor}"
                                BackgroundColor="{StaticResource CardBackground}"
                                StrokeThickness="2"
                                StrokeShape="RoundRectangle 16"
                                Padding="16"
                                HeightRequest="120">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnCardioTapped"/>
                            </Border.GestureRecognizers>
                            <VerticalStackLayout Spacing="8" 
                                                 VerticalOptions="Center" 
                                                 HorizontalOptions="Center">
                                <Label Text="ðŸƒ" FontSize="32" HorizontalOptions="Center"/>
                                <Label Text="ÐšÐ°Ñ€Ð´Ñ–Ð¾"
                                       FontSize="15"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       HorizontalOptions="Center"/>
                                <Label Text="Ð‘Ñ–Ð³, Ð²ÐµÐ»Ð¾ÑÐ¸Ð¿ÐµÐ´, ÑÐºÐ°ÐºÐ°Ð»ÐºÐ°"
                                       FontSize="11"
                                       TextColor="{StaticResource TextSecondary}"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Border>

                        <!-- Ð¡Ð¸Ð»Ð¾Ð²Ðµ Ð² Ð·Ð°Ð»Ñ– -->
                        <Border x:Name="GymCard"
                                Grid.Column="1"
                                Stroke="{StaticResource BorderColor}"
                                BackgroundColor="{StaticResource CardBackground}"
                                StrokeThickness="2"
                                StrokeShape="RoundRectangle 16"
                                Padding="16"
                                HeightRequest="120">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnGymTapped"/>
                            </Border.GestureRecognizers>
                            <VerticalStackLayout Spacing="8" 
                                                 VerticalOptions="Center" 
                                                 HorizontalOptions="Center">
                                <Label Text="ðŸ‹ï¸" FontSize="32" HorizontalOptions="Center"/>
                                <Label Text="Ð¡Ð¸Ð»Ð¾Ð²Ðµ Ð² Ð·Ð°Ð»Ñ–"
                                       FontSize="15"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       HorizontalOptions="Center"/>
                                <Label Text="Ð¢Ñ€ÐµÐ½Ð°Ð¶ÐµÑ€Ð¸, ÑˆÑ‚Ð°Ð½Ð³Ð°"
                                       FontSize="11"
                                       TextColor="{StaticResource TextSecondary}"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Border>

                        <!-- Ð¢Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ Ð²Ð´Ð¾Ð¼Ð° -->
                        <Border x:Name="HomeCard"
                                Grid.Row="1"
                                Grid.ColumnSpan="2"
                                Stroke="{StaticResource BorderColor}"
                                BackgroundColor="{StaticResource CardBackground}"
                                StrokeThickness="2"
                                StrokeShape="RoundRectangle 16"
                                Padding="16"
                                HeightRequest="100">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnHomeTapped"/>
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="16" 
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center">
                                <Label Text="ðŸ " FontSize="32" VerticalOptions="Center"/>
                                <VerticalStackLayout VerticalOptions="Center">
                                    <Label Text="Ð¢Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ Ð²Ð´Ð¾Ð¼Ð°"
                                           FontSize="15"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"/>
                                    <Label Text="Ð‘ÐµÐ· Ð¾Ð±Ð»Ð°Ð´Ð½Ð°Ð½Ð½Ñ, Ð²Ð»Ð°ÑÐ½Ð° Ð²Ð°Ð³Ð°"
                                           FontSize="11"
                                           TextColor="{StaticResource TextSecondary}"/>
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>
                    </Grid>

                    <!-- Ð¢Ñ€Ð¸Ð²Ð°Ð»Ñ–ÑÑ‚ÑŒ -->
                    <Border Stroke="{StaticResource BorderColor}"
                            BackgroundColor="{StaticResource CardBackground}"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 14"
                            Padding="14">
                        <VerticalStackLayout Spacing="12">
                            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                                <Border WidthRequest="44" HeightRequest="44"
                                        StrokeShape="RoundRectangle 22"
                                        BackgroundColor="#D1FAE5"
                                        Stroke="Transparent">
                                    <Label Text="â±ï¸" FontSize="20" 
                                           VerticalOptions="Center" 
                                           HorizontalOptions="Center"/>
                                </Border>
                                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                    <Label Text="Ð¢Ñ€Ð¸Ð²Ð°Ð»Ñ–ÑÑ‚ÑŒ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ"
                                           FontSize="13"
                                           TextColor="{StaticResource TextSecondary}"/>
                                    <Label x:Name="DurationLabel"
                                           Text="45 Ñ…Ð²Ð¸Ð»Ð¸Ð½"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"/>
                                </VerticalStackLayout>
                            </Grid>
                            <Slider x:Name="DurationSlider"
                                    Minimum="15"
                                    Maximum="90"
                                    Value="45"
                                    ValueChanged="OnDurationChanged"
                                    MinimumTrackColor="{StaticResource Primary}"
                                    MaximumTrackColor="{StaticResource BorderColor}"
                                    ThumbColor="{StaticResource Primary}"/>
                            <Grid ColumnDefinitions="*,*,*">
                                <Label Text="15 Ñ…Ð²" 
                                       FontSize="11" 
                                       TextColor="{StaticResource TextSecondary}"
                                       HorizontalOptions="Start"/>
                                <Label Grid.Column="1"
                                       Text="45 Ñ…Ð²" 
                                       FontSize="11" 
                                       TextColor="{StaticResource TextSecondary}"
                                       HorizontalOptions="Center"/>
                                <Label Grid.Column="2"
                                       Text="90 Ñ…Ð²" 
                                       FontSize="11" 
                                       TextColor="{StaticResource TextSecondary}"
                                       HorizontalOptions="End"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ— -->
                    <Border x:Name="GenerateButton"
                            StrokeShape="RoundRectangle 14"
                            Stroke="Transparent"
                            BackgroundColor="{StaticResource Primary}"
                            Padding="16,14"
                            Margin="0,8,0,0">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnGenerateClicked"/>
                        </Border.GestureRecognizers>
                        <Label Text="Ð—Ð³ÐµÐ½ÐµÑ€ÑƒÐ²Ð°Ñ‚Ð¸ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"
                               TextColor="White" 
                               FontAttributes="Bold"
                               FontSize="16"/>
                    </Border>

                    <!-- Ð†Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ -->
                    <VerticalStackLayout x:Name="LoadingContainer"
                                         IsVisible="False" 
                                         Spacing="12"
                                         HorizontalOptions="Center"
                                         Margin="0,20,0,0">
                        <ActivityIndicator IsRunning="True" 
                                           Color="{StaticResource Primary}"
                                           HeightRequest="50"
                                           WidthRequest="50"/>
                        <Label Text="AI ÑÑ‚Ð²Ð¾Ñ€ÑŽÑ” Ñ‚Ð²Ð¾Ñ” Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ..."
                               FontSize="16"
                               TextColor="{StaticResource TextSecondary}"
                               HorizontalOptions="Center"/>
                        <Label Text="Ð¦Ðµ Ð¼Ð¾Ð¶Ðµ Ð·Ð°Ð¹Ð½ÑÑ‚Ð¸ Ð´Ð¾ 30 ÑÐµÐºÑƒÐ½Ð´"
                               FontSize="13"
                               TextColor="{StaticResource TextSecondary}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                    <!-- Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ -->
                    <VerticalStackLayout x:Name="ResultContainer" 
                                         IsVisible="False" 
                                         Spacing="16">

                        <!-- Summary -->
                        <Label x:Name="SummaryLabel"
                               FontSize="15"
                               TextColor="{StaticResource TextSecondary}"
                               HorizontalTextAlignment="Center"/>

                        <!-- Ð†Ð½Ñ„Ð¾-Ð±Ð»Ð¾ÐºÐ¸ -->
                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                            <Border Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#FEF3C7"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="10">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label x:Name="TypeIcon" 
                                           Text="ðŸƒ" 
                                           FontSize="20" 
                                           HorizontalOptions="Center"/>
                                    <Label x:Name="TypeLabel"
                                           Text="ÐšÐ°Ñ€Ð´Ñ–Ð¾"
                                           FontSize="12"
                                           FontAttributes="Bold"
                                           TextColor="#92400E"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <Border Grid.Column="1"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#DBEAFE"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="10">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="â±ï¸" FontSize="20" HorizontalOptions="Center"/>
                                    <Label x:Name="DurationResultLabel"
                                           Text="45 Ñ…Ð²"
                                           FontSize="12"
                                           FontAttributes="Bold"
                                           TextColor="#1E40AF"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>

                            <Border Grid.Column="2"
                                    Stroke="{StaticResource BorderColor}"
                                    BackgroundColor="#D1FAE5"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 12"
                                    Padding="10">
                                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                                    <Label Text="ðŸ”¥" FontSize="20" HorizontalOptions="Center"/>
                                    <Label x:Name="CaloriesLabel"
                                           Text="~300 ÐºÐºÐ°Ð»"
                                           FontSize="12"
                                           FontAttributes="Bold"
                                           TextColor="#065F46"
                                           HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Border>
                        </Grid>

                        <!-- Ð Ð¾Ð·Ð¼Ð¸Ð½ÐºÐ° -->
                        <Border x:Name="WarmupContainer"
                                Stroke="{StaticResource BorderColor}"
                                BackgroundColor="#FEF3C7"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 14"
                                Padding="14">
                            <VerticalStackLayout Spacing="8">
                                <HorizontalStackLayout Spacing="8">
                                    <Label Text="ðŸ”¥" FontSize="18"/>
                                    <Label Text="Ð Ð¾Ð·Ð¼Ð¸Ð½ÐºÐ°"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#92400E"/>
                                    <Label x:Name="WarmupDurationLabel"
                                           Text="5 Ñ…Ð²"
                                           FontSize="14"
                                           TextColor="#B45309"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label x:Name="WarmupExercisesLabel"
                                       FontSize="14"
                                       TextColor="#78350F"
                                       LineHeight="1.4"/>
                            </VerticalStackLayout>
                        </Border>

                        <!-- Ð’Ð¿Ñ€Ð°Ð²Ð¸ -->
                        <Label Text="ÐžÑÐ½Ð¾Ð²Ð½Ð° Ñ‡Ð°ÑÑ‚Ð¸Ð½Ð°"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{StaticResource TextPrimary}"/>

                        <VerticalStackLayout x:Name="ExercisesContainer" Spacing="10">
                            <!-- Ð’Ð¿Ñ€Ð°Ð²Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð´Ð¾Ð´Ð°Ð½Ñ– Ð´Ð¸Ð½Ð°Ð¼Ñ–Ñ‡Ð½Ð¾ -->
                        </VerticalStackLayout>

                        <!-- Ð—Ð°Ð¼Ð¸Ð½ÐºÐ° -->
                        <Border x:Name="CooldownContainer"
                                Stroke="{StaticResource BorderColor}"
                                BackgroundColor="#DBEAFE"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 14"
                                Padding="14">
                            <VerticalStackLayout Spacing="8">
                                <HorizontalStackLayout Spacing="8">
                                    <Label Text="ðŸ§˜" FontSize="18"/>
                                    <Label Text="Ð—Ð°Ð¼Ð¸Ð½ÐºÐ°"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#1E40AF"/>
                                    <Label x:Name="CooldownDurationLabel"
                                           Text="5 Ñ…Ð²"
                                           FontSize="14"
                                           TextColor="#3B82F6"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label x:Name="CooldownExercisesLabel"
                                       FontSize="14"
                                       TextColor="#1E3A8A"
                                       LineHeight="1.4"/>
                            </VerticalStackLayout>
                        </Border>

                    </VerticalStackLayout>

                    <!-- ÐŸÐ¾Ñ‡Ð°Ñ‚ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ -->
                    <VerticalStackLayout x:Name="InitialMessage"
                                         Spacing="16"
                                         HorizontalOptions="Center"
                                         Margin="0,20,0,0">
                        <Label Text="ðŸ‘†" FontSize="40" HorizontalOptions="Center"/>
                        <Label Text="ÐžÐ±ÐµÑ€Ð¸ Ñ‚Ð¸Ð¿ Ñ‚Ñ€ÐµÐ½ÑƒÐ²Ð°Ð½Ð½Ñ Ð²Ð¸Ñ‰Ðµ"
                               FontSize="16"
                               TextColor="{StaticResource TextSecondary}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </ScrollView>
        </Border>

    </Grid>
</ContentPage>